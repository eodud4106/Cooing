<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cooing.www.member.dao.RelationMapper">

	<insert id="insertFriend" parameterType="map">
	insert into friend (friend_num,friend_id1,friend_id2)
		values (friend_seq.nextval,#{person},#{friend})
	</insert>	
	
	<select id="selectFriend" resultType="String" parameterType="String">
	select friend_id2 from friend where friend_id1 = #{id}
	</select>
	
	<delete id="deleteFriend" parameterType="map">
	delete from friend where friend_id1 = #{person} and friend_id2 = #{friend}
	</delete>
	
	<insert id="insertParty" parameterType="party">
	insert into party (party_num,party_name,party_leader)
		values (party_seq.nextval,#{party_name},#{party_leader})
	</insert>
	
	<select id="searchPartyNumber" resultType="int" parameterType="String">
	select party_num from party where party_name = #{party_name}
	</select>
	
	<insert id="insertPartyMember" parameterType="partymember">
	insert into partymember (g_member_num,g_member_partynum,g_member_memberid)
		values (partymember_seq.nextval,#{g_member_partynum},#{g_member_memberid})
	</insert>
	
	<select id="searchLeaderPartyName" resultType="String" parameterType="String">
	select party_name from party where party_leader = #{party_leader}
	</select>
	
	<select id="searchPartyByMemberid" resultType="party" parameterType="String">
	SELECT *
	FROM party
	WHERE party_num in
		(SELECT g_member_partynum
		FROM partymember
		WHERE g_member_memberid = #{g_member_memberid})
	</select>
	
	<select id="searchPartyName" resultType="String" parameterType="int">
	select party_name from party where party_num = #{party_num}
	</select>
	
	<select id="searchParty" resultType="party" parameterType="String">
	select * from party where party_name = #{party_name}
	</select>
	
	<select id="searchPartyMember" resultType="partymember" parameterType="int">
	select * from partymember where g_member_partynum = #{g_member_partynum}
	</select>
	
	<delete id="deletePartyMember" parameterType="map">
		delete from partymember where g_member_partynum=#{g_member_partynum} and g_member_memberid=#{g_member_memberid}
	</delete>
	<delete id="deleteLeaderParty" parameterType="int">
		delete from party where party_num=#{party_num}
	</delete>
	<delete id="deleteMemberParty" parameterType="int">
		delete from partymember where g_member_partynum=#{g_member_partynum}
	</delete>
</mapper>
